ğŸ©º Probes no Kubernetes

Os probes sÃ£o verificaÃ§Ãµes automÃ¡ticas que o kubelet realiza para monitorar a saÃºde dos containers. Existem trÃªs tipos principais:

ğŸ” Liveness Probe
- Objetivo: Verifica se o container ainda estÃ¡ vivo.
- Se falhar: O container Ã© reiniciado.
- Uso comum: Detectar deadlocks ou falhas irreversÃ­veis.
livenessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 3
  periodSeconds: 5

ğŸš¦ Readiness Probe
- Objetivo: Verifica se o container estÃ¡ pronto para receber trÃ¡fego.
- Se falhar: O Pod Ã© removido do Service.
- Uso comum: Evitar que trÃ¡fego chegue em containers ainda iniciando.
readinessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 5

â³ Startup Probe
- Objetivo: Verifica se a aplicaÃ§Ã£o iniciou corretamente.
- Se configurado: Liveness e Readiness sÃ³ comeÃ§am apÃ³s sucesso.
- Uso comum: Evitar que containers lentos sejam mortos prematuramente.
startupProbe:
  httpGet:
    path: /healthz
    port: 8080
  failureThreshold: 30
  periodSeconds: 10

âš™ï¸ Tipos de Probes
- httpGet: Faz uma requisiÃ§Ã£o HTTP.
- tcpSocket: Testa conexÃ£o TCP.
- exec: Executa um comando dentro do container.

ğŸ§  Boas prÃ¡ticas
- Evite configurar probes agressivos demais â€” podem causar reinÃ­cios desnecessÃ¡rios.
- Use startupProbe para apps com inicializaÃ§Ã£o lenta.
- Teste localmente antes de aplicar em produÃ§Ã£o.

Mais detalhes: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/

